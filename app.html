<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>INDIGIS â€” App</title>

  <!-- Main UI Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- LOGIN GUARDS -->
  <script>
    // Must be logged in
    if (localStorage.getItem('indigis_logged_in') !== 'true') {
      window.location.href = 'index.html';
    }

    // Must have workspace
    if (localStorage.getItem('indigis_workspace_created') !== 'true') {
      window.location.href = 'workspace.html';
    }
  </script>

  <div id="app" class="theme-auto">

    <!-- TOP HUD -->
    <header class="top-hud">
      <div class="hud-left">
        <div class="logo">
          INDIGIS <span class="brand">Prototype</span>
        </div>
      </div>

      <div class="hud-right">
        <button id="logoutBtn" class="icon-btn" title="Logout">ðŸšª</button>
      </div>
    </header>

    <!-- MAIN LAYOUT -->
    <div class="main-area">

      <!-- LEFT PANEL -->
      <aside class="left-panel">

        <div class="panel">
          <div class="panel-header">Layers</div>
          <div class="panel-body">
            <ul class="layer-list">
              <li><span class="chip vector">Base Map</span></li>
              <li><span class="chip vector">Points</span></li>
              <li><span class="chip raster">Raster</span></li>
            </ul>
          </div>
        </div>

      </aside>

      <!-- MAP AREA -->
      <main class="map-area">
        <div class="map-toolbar">
          <div>Map View</div>
        </div>

        <!-- Placeholder canvas (later replaced with OpenLayers/Cesium) -->
        <div class="map-canvas">
          <div class="map-placeholder">
            Map canvas (OpenLayers / Cesium will load here)
          </div>
        </div>
      </main>

      <!-- RIGHT PANEL -->
      <aside class="right-panel">
        <div class="panel">
          <div class="panel-header">Inspector</div>
          <div class="panel-body">No selection</div>
        </div>
      </aside>

    </div>

    <!-- STATUS RIBBON -->
    <footer class="status-ribbon">
      <div class="status-left">
        <span id="coords">Lat: â€” , Lon: â€”</span>
        <span>|</span>
        <span id="proj">Proj: â€”</span>
      </div>
      <div class="status-right">
        <span>Scale 1: <strong id="scale">â€”</strong></span>
      </div>
    </footer>

  </div>

  <!-- APP SCRIPT (Logout + Workspace Info) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // LOGOUT
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
          localStorage.removeItem('indigis_logged_in');
          window.location.href = 'index.html';
        });
      }

      // Load workspace details
      const data = localStorage.getItem('indigis_workspace_data');
      if (data) {
        try {
          const obj = JSON.parse(data);
          document.getElementById('proj').textContent =
            'Proj: ' + (obj.proj || 'â€”');
        } catch (e) {}
      }
    });
  </script>

</body>
</html>
